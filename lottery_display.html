<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ æŠ½çå¤§è¢å¹•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            height: 100vh;
            overflow: hidden;
            cursor: none;
            color: white;
        }

        .container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            position: relative;
        }

        /* æ¨™é¡Œå€åŸŸ */
        .title-section {
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-title {
            font-size: 4em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.5em;
            color: rgba(255,255,255,0.9);
            font-weight: 300;
        }

        /* çé …è³‡è¨Š */
        .prize-section {
            background: rgba(255,255,255,0.95);
            color: #333;
            border-radius: 25px;
            padding: 40px 60px;
            margin-bottom: 50px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.5s ease;
            display: none;
        }

        .prize-section.show {
            transform: scale(1);
            opacity: 1;
            display: block;
        }

        .prize-title {
            font-size: 2.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .prize-quantity {
            font-size: 1.1em;
            color: #7f8c8d;
        }

        /* æŠ½çå€åŸŸ */
        .lottery-section {
            width: 100%;
            max-width: 800px;
            text-align: center;
            position: relative;
        }

        .name-display {
            background: rgba(255,255,255,0.95);
            color: #333;
            border-radius: 20px;
            padding: 60px 40px;
            margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .name-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(52, 152, 219, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
        }

        .rolling .name-display::before {
            animation: shine 0.8s ease-in-out infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .current-name {
            font-size: 4em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .rolling .current-name {
            animation: nameRoll 0.1s ease-in-out infinite;
        }

        @keyframes nameRoll {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }

        .current-details {
            font-size: 1.3em;
            color: #7f8c8d;
            position: relative;
            z-index: 2;
        }

        /* ç²çè€…é¡¯ç¤º */
        .winner-section {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            z-index: 50;
        }

        .winner-section.show {
            opacity: 1;
            visibility: visible;
        }

        .winner-announcement {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 30px;
            animation: bounce 1s ease-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        .winner-name {
            font-size: 5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 4px 8px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.3); }
            to { text-shadow: 0 4px 8px rgba(0,0,0,0.3), 0 0 30px rgba(255,255,255,0.6); }
        }

        .winner-prize {
            font-size: 2.5em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .winner-details {
            font-size: 1.5em;
            opacity: 0.8;
        }

        /* ç…™ç«æ•ˆæœ */
        .fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 60;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
        }

        @keyframes fireworkExplode {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.8;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }

        /* ç‹€æ…‹æŒ‡ç¤º */
        .status-indicator {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 90;
        }

        .status-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* æ¼¸è®ŠèƒŒæ™¯å‹•ç•« */
        .gradient-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                rgba(255,0,150,0.1) 0%,
                rgba(0,255,255,0.1) 25%,
                rgba(255,255,0,0.1) 50%,
                rgba(255,0,255,0.1) 75%,
                rgba(0,255,0,0.1) 100%);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
            opacity: 0;
            transition: opacity 2s;
            z-index: 1;
        }

        .gradient-bg.active {
            opacity: 1;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* ç‹€æ…‹åˆ— */
        .status-bar {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9em;
            z-index: 100;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .status-bar:hover {
            opacity: 1;
        }

        .status-bar.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 1024px) {
            .main-title { font-size: 3em; }
            .current-name { font-size: 3em; }
            .winner-name { font-size: 4em; }
            .prize-title { font-size: 2em; }
        }

        @media (max-width: 768px) {
            .main-title { font-size: 2.5em; }
            .current-name { font-size: 2.5em; }
            .winner-name { font-size: 3em; }
            .prize-title { font-size: 1.8em; }
            .container { padding: 20px; }
        }
    </style>
</head>
<body>
    <!-- æ¼¸è®ŠèƒŒæ™¯ -->
    <div class="gradient-bg" id="gradientBg"></div>

    <!-- ç‹€æ…‹åˆ— -->
    <div class="status-bar" id="statusBar">
        é€£æ¥ç‹€æ…‹: <span id="connectionStatus">å·²é€£æ¥</span>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="title-section" id="titleSection">
            <h1 class="main-title">ğŸ¯ æŠ½çå¤§è¢å¹•</h1>
            <p class="subtitle">ç­‰å¾…é–‹å§‹æŠ½ç...</p>
        </div>

        <!-- çé …è³‡è¨Š -->
        <div class="prize-section" id="prizeSection">
            <div class="prize-title" id="prizeTitle">æº–å‚™ä¸­...</div>
            <div class="prize-quantity" id="prizeQuantity"></div>
        </div>

        <!-- æŠ½çå€åŸŸ -->
        <div class="lottery-section" id="lotterySection">
            <div class="name-display" id="nameDisplay">
                <div class="current-name" id="currentName">ğŸ²</div>
                <div class="current-details" id="currentDetails">ç­‰å¾…æ‰‹æ©Ÿæ§åˆ¶æŒ‡ä»¤</div>
            </div>
        </div>

        <!-- ç²çè€…å±•ç¤º -->
        <div class="winner-section" id="winnerSection">
            <div class="fireworks" id="fireworks"></div>
            <div class="winner-announcement">ğŸ‰ æ­å–œç²ç ğŸ‰</div>
            <div class="winner-name" id="winnerName"></div>
            <div class="winner-prize" id="winnerPrize"></div>
            <div class="winner-details" id="winnerDetails"></div>
        </div>
    </div>

    <!-- ç‹€æ…‹æŒ‡ç¤ºå™¨ -->
    <div class="status-indicator" id="statusIndicator"></div>

    <script>
        // å…¨å±€è®Šæ•¸
        let employees = [];
        let lotteryState = { status: 'waiting', currentPrize: null, currentWinner: null };
        let rollingInterval = null;
        let statusBarTimer = null;
        let mouseTimer = null;

        // åˆå§‹åŒ–
        function init() {
            console.log('ğŸ¯ æŠ½çå¤§è¢å¹•å·²è¼‰å…¥');
            loadEmployees();
            setupEventListeners();
            updateDisplay();
            showStatusMessage('å¤§è¢å¹•å·²å°±ç·’', 3000);
        }

        // è¼‰å…¥å“¡å·¥è³‡æ–™
        function loadEmployees() {
            try {
                const storedEmployees = JSON.parse(localStorage.getItem('employees') || '[]');
                employees = storedEmployees.filter(emp => emp.status === 'active');
                console.log('è¼‰å…¥å“¡å·¥è³‡æ–™:', employees.length, 'äºº');
            } catch (error) {
                console.error('è¼‰å…¥å“¡å·¥è³‡æ–™å¤±æ•—:', error);
                employees = [];
            }
        }

        // è¨­å®šäº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            console.log('è¨­å®šå¤§è¢å¹•äº‹ä»¶ç›£è½å™¨...');
            
            // ç›£è½ localStorage è®ŠåŒ–
            window.addEventListener('storage', function(e) {
                console.log('å¤§è¢å¹•æ”¶åˆ°storageäº‹ä»¶:', e.key);
                
                try {
                    if (e.key === 'lotteryEvent') {
                        const event = JSON.parse(e.newValue || '{}');
                        console.log('æ”¶åˆ°æŠ½çäº‹ä»¶:', event);
                        handleLotteryEvent(event);
                    }
                    if (e.key === 'lotteryState') {
                        const newState = JSON.parse(e.newValue || '{"status": "waiting"}');
                        console.log('æ”¶åˆ°ç‹€æ…‹è®ŠåŒ–:', newState);
                        handleStateChange(newState);
                    }
                    if (e.key === 'employees') {
                        console.log('å“¡å·¥è³‡æ–™æ›´æ–°');
                        loadEmployees();
                    }
                    if (e.key === 'lotteryResult') {
                        const event = JSON.parse(e.newValue || '{}');
                        console.log('æ”¶åˆ°æŠ½ççµæœ:', event);
                        if (event.type === 'LOTTERY_RESULT' && event.data) {
                            showWinner(event.data);
                        }
                    }
                    if (e.key === 'testRecordsCleared') {
                        console.log('æ”¶åˆ°æ¸¬è©¦è¨˜éŒ„æ¸…ç©ºé€šçŸ¥');
                        resetDisplay();
                    }
                } catch (error) {
                    console.error('äº‹ä»¶è™•ç†éŒ¯èª¤:', error);
                }
            });

            // éµç›¤æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                switch (e.code) {
                    case 'KeyH':
                        e.preventDefault();
                        toggleStatusBar();
                        break;
                    case 'KeyF':
                        e.preventDefault();
                        toggleFullscreen();
                        break;
                    case 'KeyR':
                        e.preventDefault();
                        reconnect();
                        break;
                    case 'KeyD':
                        // Déµé¡¯ç¤ºèª¿è©¦è³‡è¨Š
                        e.preventDefault();
                        console.log('=== å¤§è¢å¹•èª¿è©¦è³‡è¨Š ===');
                        console.log('å“¡å·¥æ•¸é‡:', employees.length);
                        console.log('æŠ½çç‹€æ…‹:', lotteryState);
                        console.log('æ»¾å‹•ç‹€æ…‹:', !!rollingInterval);
                        showStatusMessage('èª¿è©¦è³‡è¨Šå·²è¼¸å‡ºåˆ°æ§åˆ¶å°', 2000);
                        break;
                }
            });

            // æ»‘é¼ ç§»å‹•æ§åˆ¶
            document.addEventListener('mousemove', () => {
                showCursor();
            });
        }

        // è™•ç†æŠ½çäº‹ä»¶
        function handleLotteryEvent(event) {
            switch (event.type) {
                case 'START_LOTTERY':
                    startLotteryDisplay(event.prizeId);
                    break;
                case 'STOP_LOTTERY':
                    // ç­‰å¾…çµæœ
                    break;
                case 'FORCE_STOP':
                case 'EMERGENCY_RESET':
                    resetDisplay();
                    break;
            }
        }

        // è™•ç†ç‹€æ…‹è®ŠåŒ–
        function handleStateChange(newState) {
            lotteryState = newState;
            updateDisplay();
        }

        // é–‹å§‹æŠ½çé¡¯ç¤º
        function startLotteryDisplay(prizeId) {
            lotteryState.status = 'rolling';
            lotteryState.currentPrize = prizeId;
            
            showCurrentPrize(prizeId);
            startRolling();
            showStatusMessage('æŠ½çé–‹å§‹ï¼', 2000);
        }

        // é¡¯ç¤ºç•¶å‰çé …
        function showCurrentPrize(prizeId) {
            const titleSection = document.getElementById('titleSection');
            const prizeSection = document.getElementById('prizeSection');
            const prizeTitle = document.getElementById('prizeTitle');
            const prizeQuantity = document.getElementById('prizeQuantity');
            
            let prizeName = '';
            let prizeInfo = '';
            
            if (prizeId === 'bonus') {
                prizeName = 'åŠ ç¢¼ç';
                const bonusSettings = JSON.parse(localStorage.getItem('bonusSettings') || '{}');
                prizeInfo = `åé¡: ${bonusSettings.quantity || 2}`;
            } else {
                const prizes = JSON.parse(localStorage.getItem('prizes') || '[]');
                const prize = prizes.find(p => p.id === parseInt(prizeId));
                if (prize) {
                    prizeName = prize.name;
                    prizeInfo = `åé¡: ${prize.quantity} | å‰©é¤˜: ${prize.quantity - prize.drawn}`;
                }
            }
            
            prizeTitle.textContent = prizeName;
            prizeQuantity.textContent = prizeInfo;
            
            titleSection.style.display = 'none';
            prizeSection.classList.add('show');
        }

        // é–‹å§‹æ»¾å‹•
        function startRolling() {
            if (employees.length === 0) {
                showStatusMessage('æ²’æœ‰å“¡å·¥è³‡æ–™', 3000);
                return;
            }
            
            const nameDisplay = document.getElementById('nameDisplay');
            const currentName = document.getElementById('currentName');
            const currentDetails = document.getElementById('currentDetails');
            const gradientBg = document.getElementById('gradientBg');
            
            nameDisplay.classList.add('rolling');
            gradientBg.classList.add('active');
            
            rollingInterval = setInterval(() => {
                const randomEmployee = employees[Math.floor(Math.random() * employees.length)];
                currentName.textContent = randomEmployee.name;
                currentDetails.textContent = randomEmployee.department || '';
            }, 100);
        }

        // åœæ­¢æ»¾å‹•
        function stopRolling() {
            if (rollingInterval) {
                clearInterval(rollingInterval);
                rollingInterval = null;
            }
            
            const nameDisplay = document.getElementById('nameDisplay');
            const gradientBg = document.getElementById('gradientBg');
            
            nameDisplay.classList.remove('rolling');
            gradientBg.classList.remove('active');
        }

        // é¡¯ç¤ºç²çè€…
        function showWinner(winner) {
            stopRolling();
            
            const winnerSection = document.getElementById('winnerSection');
            const winnerName = document.getElementById('winnerName');
            const winnerPrize = document.getElementById('winnerPrize');
            const winnerDetails = document.getElementById('winnerDetails');
            
            winnerName.textContent = winner.employeeName || winner.name;
            winnerPrize.textContent = winner.prizeName;
            winnerDetails.textContent = winner.department;
            
            winnerSection.classList.add('show');
            createFireworks();
            
            showStatusMessage(`ğŸ‰ ${winner.employeeName || winner.name} ç²å¾— ${winner.prizeName}`, 8000);
            
            // 10ç§’å¾Œè‡ªå‹•éš±è—ï¼ˆå»¶é•·åˆ°10ç§’ï¼‰
            setTimeout(() => {
                hideWinner();
            }, 10000);
        }

        // éš±è—ç²çè€…
        function hideWinner() {
            const winnerSection = document.getElementById('winnerSection');
            winnerSection.classList.remove('show');
            
            // æ¸…é™¤ç…™ç«
            document.getElementById('fireworks').innerHTML = '';
            
            // é‡ç½®åˆ°ç­‰å¾…ç‹€æ…‹
            setTimeout(() => {
                resetToWaiting();
            }, 500);
        }

        // é‡ç½®åˆ°ç­‰å¾…ç‹€æ…‹
        function resetToWaiting() {
            const titleSection = document.getElementById('titleSection');
            const prizeSection = document.getElementById('prizeSection');
            const currentName = document.getElementById('currentName');
            const currentDetails = document.getElementById('currentDetails');
            
            titleSection.style.display = 'block';
            prizeSection.classList.remove('show');
            
            currentName.textContent = 'ğŸ²';
            currentDetails.textContent = 'ç­‰å¾…æ‰‹æ©Ÿæ§åˆ¶æŒ‡ä»¤';
            
            document.querySelector('.subtitle').textContent = 'ç­‰å¾…é–‹å§‹æŠ½ç...';
        }

        // ç…™ç«æ•ˆæœ
        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            const colors = ['#ff6b6b', '#ffd93d', '#6bcf7f', '#4ecdc4', '#45b7d1', '#96ceb4'];
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.left = Math.random() * 100 + '%';
                    firework.style.top = Math.random() * 100 + '%';
                    firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                    firework.style.animation = 'fireworkExplode 1s ease-out forwards';
                    
                    fireworksContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        if (firework.parentNode) {
                            firework.parentNode.removeChild(firework);
                        }
                    }, 1000);
                }, i * 50);
            }
        }

        // é‡ç½®é¡¯ç¤º
        function resetDisplay() {
            stopRolling();
            hideWinner();
            resetToWaiting();
            showStatusMessage('ç³»çµ±å·²é‡ç½®', 3000);
        }

        // æ›´æ–°é¡¯ç¤º
        function updateDisplay() {
            // æ ¹æ“šç‹€æ…‹æ›´æ–°é¡¯ç¤º
            switch (lotteryState.status) {
                case 'waiting':
                    resetToWaiting();
                    break;
                case 'rolling':
                    if (lotteryState.currentPrize && !rollingInterval) {
                        startLotteryDisplay(lotteryState.currentPrize);
                    }
                    break;
                case 'showing':
                    if (lotteryState.currentWinner) {
                        showWinner(lotteryState.currentWinner);
                    }
                    break;
            }
        }

        // ç‹€æ…‹è¨Šæ¯
        function showStatusMessage(message, duration = 3000) {
            const indicator = document.getElementById('statusIndicator');
            indicator.textContent = message;
            indicator.classList.add('show');
            
            setTimeout(() => {
                indicator.classList.remove('show');
            }, duration);
        }

        // ç‹€æ…‹åˆ—æ§åˆ¶
        function toggleStatusBar() {
            const statusBar = document.getElementById('statusBar');
            statusBar.classList.toggle('hidden');
        }

        // å…¨è¢å¹•æ§åˆ¶
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    showStatusMessage('å·²é€²å…¥å…¨è¢å¹•', 2000);
                }).catch(() => {
                    showStatusMessage('ç„¡æ³•é€²å…¥å…¨è¢å¹•', 2000);
                });
            } else {
                document.exitFullscreen().then(() => {
                    showStatusMessage('å·²é€€å‡ºå…¨è¢å¹•', 2000);
                });
            }
        }

        // é‡æ–°é€£æ¥
        function reconnect() {
            loadEmployees();
            const newState = JSON.parse(localStorage.getItem('lotteryState') || '{"status": "waiting"}');
            handleStateChange(newState);
            showStatusMessage('å·²é‡æ–°é€£æ¥', 2000);
        }

        // é¡¯ç¤ºæ¸¸æ¨™
        function showCursor() {
            document.body.style.cursor = 'default';
            
            if (mouseTimer) {
                clearTimeout(mouseTimer);
            }
            
            mouseTimer = setTimeout(() => {
                document.body.style.cursor = 'none';
            }, 2000);
        }

        // é é¢è¼‰å…¥å®Œæˆ
        document.addEventListener('DOMContentLoaded', init);

        // è™•ç†ç¶²è·¯ç‹€æ…‹
        window.addEventListener('online', () => {
            document.getElementById('connectionStatus').textContent = 'å·²é€£æ¥';
            showStatusMessage('ç¶²è·¯å·²æ¢å¾©', 2000);
        });

        window.addEventListener('offline', () => {
            document.getElementById('connectionStatus').textContent = 'å·²ä¸­æ–·';
            showStatusMessage('ç¶²è·¯ä¸­æ–·ï¼Œç¹¼çºŒé‹è¡Œ', 3000);
        });

        // é˜²æ­¢å³éµå’Œé¸å–
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', e => e.preventDefault());

        // æ¸…ç†è³‡æº
        window.addEventListener('beforeunload', () => {
            if (rollingInterval) {
                clearInterval(rollingInterval);
            }
            if (statusBarTimer) {
                clearTimeout(statusBarTimer);
            }
            if (mouseTimer) {
                clearTimeout(mouseTimer);
            }
        });

        console.log('ğŸ¯ æŠ½çå¤§è¢å¹•å·²åˆå§‹åŒ–');
        console.log('âš¡ å¿«æ·éµ: H-ç‹€æ…‹åˆ— | F-å…¨è¢å¹• | R-é‡é€£');
    </script>

    <!-- ===== Firebase é ç«¯æ§åˆ¶æ•´åˆ (é–‹å§‹) ===== -->
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <!-- Firebase ç³»çµ±æª”æ¡ˆ -->
    <script src="firebase_config.js"></script>
    <script src="firebase_core.js"></script>
    <script src="lottery_events.js"></script>

    <!-- æ–°ç‰ˆ RTDB æ©‹æ¥å™¨ -->
    <script src="lottery_bridge_rtdb.js"></script>
    <script>
        // é¡¯ç¤ºé ç›®å‰åªéœ€è¦ä¿æŒåŸæœ¬è¡Œç‚º
        window.lotteryBridge && window.lotteryBridge.init('display');
    </script>
    <!-- ===== Firebase é ç«¯æ§åˆ¶æ•´åˆ (çµæŸ) ===== -->

</body>
</html>